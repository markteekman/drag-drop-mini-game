"use strict";function _toConsumableArray(e){return _arrayWithoutHoles(e)||_iterableToArray(e)||_unsupportedIterableToArray(e)||_nonIterableSpread()}function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _unsupportedIterableToArray(e,t){if(e){if("string"==typeof e)return _arrayLikeToArray(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?_arrayLikeToArray(e,t):void 0}}function _iterableToArray(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}function _arrayWithoutHoles(e){if(Array.isArray(e))return _arrayLikeToArray(e)}function _arrayLikeToArray(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var draggables=document.querySelectorAll("[data-draggable]"),totalNumberOfBoxes=_toConsumableArray(document.querySelector("[data-pickzone]").children),succesMessage=document.querySelector(".success"),getDropzone=function(e){var t=e.getBoundingClientRect(),e=t.top,t=t.left;return document.elementFromPoint(t,e).closest("[data-dropzone]")};function getCurrentPreviewPosition(e,t){return _toConsumableArray(e.children).findIndex(function(e){return e===t})}function getDesiredPreviewPosition(e,t){var t=t.getBoundingClientRect(),r=t.left,n=t.top;return _toConsumableArray(e.children).map(function(e){return e.getBoundingClientRect()}).findIndex(function(e){return e.left<r&&r<e.right&&e.top<n&&n<e.bottom})}draggables.forEach(function(e){e.addEventListener("touchstart",function(e){e.preventDefault()})}),draggables.forEach(function(e){e.addEventListener("pointerdown",function(e){e.preventDefault();var c=e.target,t=c.getBoundingClientRect(),o=e.screenX,a=e.screenY,s=c.cloneNode();function l(e){var t=e.screenX-o,r=e.screenY-a;o=e.screenX,a=e.screenY;var n=parseFloat(c.style.left),e=parseFloat(c.style.top);c.style.left="".concat(n+t,"px"),c.style.top="".concat(e+r,"px");t=getDropzone(c);t&&(-1===(e=getCurrentPreviewPosition(t,s))&&(t.append(s),e=t.children.length-1),-1!==(r=getDesiredPreviewPosition(t,c))&&(t=t.children[r],e<r?t.after(s):t.before(s)))}s.classList.add("preview"),c.before(s),document.body.append(c),c.dataset.dragging=!0,c.style.left="".concat(t.left,"px"),c.style.top="".concat(t.top,"px"),c.style.width="".concat(t.width,"px"),c.style.height="".concat(t.height,"px"),c.setPointerCapture(e.pointerId),c.addEventListener("pointermove",l),c.addEventListener("pointerup",function e(t){c.removeEventListener("pointermove",l);c.removeEventListener("pointerup",e);c.releasePointerCapture(t.pointerId);c.dataset.dragging=!1;s.before(c);s.remove();var r=_toConsumableArray(document.querySelector("[data-dropzone]").children);if(r.length===totalNumberOfBoxes.length)for(var n=1,o=1;o<r.length+1;o++){var a=r[o-1],i=r.indexOf(a)+1,a=parseInt(a.getAttribute("data-number"));i===a&&n++,n===r.length&&succesMessage.classList.add("show")}})})});
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm1ha2UtaXQtd29yay5qcyJdLCJuYW1lcyI6WyJkcmFnZ2FibGVzIiwiZG9jdW1lbnQiLCJxdWVyeVNlbGVjdG9yQWxsIiwidG90YWxOdW1iZXJPZkJveGVzIiwiX3RvQ29uc3VtYWJsZUFycmF5IiwicXVlcnlTZWxlY3RvciIsImNoaWxkcmVuIiwic3VjY2VzTWVzc2FnZSIsImdldERyb3B6b25lIiwiZWxlbWVudCIsIl9lbGVtZW50JGdldEJvdW5kaW5nQyIsImdldEJvdW5kaW5nQ2xpZW50UmVjdCIsInRvcCIsImxlZnQiLCJlbGVtZW50RnJvbVBvaW50IiwiY2xvc2VzdCIsImdldEN1cnJlbnRQcmV2aWV3UG9zaXRpb24iLCJkcm9wem9uZSIsInByZXZpZXciLCJmaW5kSW5kZXgiLCJnZXREZXNpcmVkUHJldmlld1Bvc2l0aW9uIiwiX2VsZW1lbnQkZ2V0Qm91bmRpbmdDMiIsIm1hcCIsInBvcyIsInJpZ2h0IiwiYm90dG9tIiwiZm9yRWFjaCIsImRyYWdnYWJsZSIsImFkZEV2ZW50TGlzdGVuZXIiLCJldmVudCIsInByZXZlbnREZWZhdWx0IiwidGFyZ2V0IiwiYm94IiwicHJldlNjcmVlblgiLCJzY3JlZW5YIiwicHJldlNjcmVlblkiLCJzY3JlZW5ZIiwiY2xvbmVOb2RlIiwicGFyc2VGbG9hdCIsInN0eWxlIiwiY29uY2F0IiwibW92ZW1lbnRYIiwibW92ZW1lbnRZIiwicHJldmlld1BvcyIsImxlbmd0aCIsInBvc2l0aW9uIiwiZWxlbSIsImFmdGVyIiwiYmVmb3JlIiwiYm9keSIsImFwcGVuZCIsImRhdGFzZXQiLCJkcmFnZ2luZyIsImhlaWdodCIsInNldFBvaW50ZXJDYXB0dXJlIiwicG9pbnRlcklkIiwibW92ZSIsInVwIiwicmVtb3ZlRXZlbnRMaXN0ZW5lciIsInJlbGVhc2VQb2ludGVyQ2FwdHVyZSIsInJlbW92ZSIsIndpbm5pbmdOdW1iZXIiLCJpIiwiY3VycmVudERyb3B6b25lQm94ZXMiLCJjdXJyZW50Qm94IiwiY3VycmVudEJveFBvc2l0aW9uIiwiaW5kZXhPZiIsImN1cnJlbnRCb3hOdW1iZXIiLCJwYXJzZUludCIsImdldEF0dHJpYnV0ZSIsImNsYXNzTGlzdCIsImFkZCJdLCJtYXBwaW5ncyI6IjY5QkFJQSxJQUFBQSxXQUFBQyxTQUFBQyxpQkFBQSxvQkFDQUMsbUJBQUFDLG1CQUFBSCxTQUFBSSxjQUFBLG1CQUFBQyxVQUNBQyxjQUFBTixTQUFBSSxjQUFBLFlBT0FHLFlBQUEsU0FBQUMsR0FBQSxJQUFBQyxFQWJBRCxFQUFBRSx3QkFBQUMsRUFhQUYsRUFiQUUsSUFBQUMsRUFhQUgsRUFiQUcsS0FFQSxPQURBWixTQUFBYSxpQkFBQUQsRUFBQUQsR0FDQUcsUUFBQSxvQkFrQkEsU0FBQUMsMEJBQUFDLEVBQUFDLEdBZEEsT0FBQWQsbUJBQUFhLEVBQUFYLFVBQUFhLFVBQUEsU0FBQVYsR0FHQSxPQUFBQSxJQUFBUyxJQUlBLFNBQUFFLDBCQUFBSCxFQUFBUixHQUFBLElBQUFZLEVBQUFaLEVBQUFFLHdCQUFBRSxFQUFBUSxFQUFBUixLQUFBRCxFQUFBUyxFQUFBVCxJQUlBLE9BYUFSLG1CQUFBYSxFQUFBWCxVQWZBZ0IsSUFBQSxTQUFBYixHQUFBLE9BQUFBLEVBQUFFLDBCQUVBUSxVQUFBLFNBQUFJLEdBaUJBLE9BQUFBLEVBQUFWLEtBQUFBLEdBQUFBLEVBQUFVLEVBQUFDLE9BQ0FELEVBQUFYLElBQUFBLEdBQUFBLEVBQUFXLEVBQUFFLFNBUkF6QixXQUFBMEIsUUFBQSxTQUFBQyxHQUFBQSxFQUFBQyxpQkFBQSxhQUFBLFNBQUFDLEdBQUFBLEVBQUFDLHFCQXdCQTlCLFdBQUEwQixRQUFBLFNBQUFDLEdBbEJBQSxFQUFBQyxpQkFBQSxjQUFBLFNBQUFDLEdBQ0FBLEVBQUFDLGlCQUdBLElBQUFDLEVBQUFGLEVBQUFFLE9BR0FDLEVBQUFELEVBQUFwQix3QkFDQXNCLEVBQUFKLEVBQUFLLFFBRUFDLEVBQUFOLEVBQUFPLFFBaUJBbEIsRUFBQWEsRUFBQU0sWUFJQXBDLFNBQUFBLEVBQUFBLEdBR0E4QixJQUFBQSxFQUFBQSxFQUFBQSxRQUFBQSxFQUNBQSxFQUFBQSxFQUFBQSxRQUFBQSxFQUNBQSxFQUFBQSxFQUFBQSxRQUNBQSxFQUFBQSxFQUFBQSxRQUlBQSxJQUFBQSxFQUFBQSxXQUFBQSxFQUFBQSxNQUFBQSxNQVlBbkIsRUFBQTBCLFdBQUFQLEVBQUFRLE1BQUEzQixLQVRBbUIsRUFBQVEsTUFBQTFCLEtBQUEsR0FBQTJCLE9BQUEzQixFQUFBNEIsRUFBQSxNQUNBVixFQUFBUSxNQUFBM0IsSUFBQSxHQUFBNEIsT0FBQTVCLEVBQUE4QixFQUFBLE1BR0FULEVBQUFBLFlBQUFBLEdBQ0FFLEtBS0FKLEtBREFZLEVBQUEzQiwwQkFBQUMsRUFBQUMsTUFFQWEsRUFBQUEsT0FBQUEsR0FVQVksRUFBQTFCLEVBQUFYLFNBQUFzQyxPQUFBLElBS0EsS0FSQUMsRUFBQXpCLDBCQUFBSCxFQUFBYyxNQUVBZCxFQUFBQSxFQUFBQSxTQUFBQSxHQUNBMEIsRUFBQUEsRUFDQUcsRUFBQUMsTUFBQTdCLEdBVUE0QixFQUFBRSxPQUFBOUIsS0FqRUFsQixFQUFBQSxVQUFBQSxJQUFBQSxXQUNBMkIsRUFBQUEsT0FBQUEsR0FFQTFCLFNBQUFnRCxLQUFBQyxPQUFBbkIsR0FDQUEsRUFBQW9CLFFBQUFDLFVBQUEsRUFHQXBELEVBQUFBLE1BQUFBLEtBQUFBLEdBQUFBLE9BQUFBLEVBQUFBLEtBQUFBLE1BQ0EyQixFQUFBQSxNQUFBQSxJQUFBQSxHQUFBQSxPQUFBQSxFQUFBQSxJQUFBQSxNQUNBRSxFQUFBQSxNQUFBQSxNQUFBQSxHQUFBQSxPQUFBQSxFQUFBQSxNQUFBQSxNQUVBRSxFQUFBUSxNQUFBYyxPQUFBLEdBQUFiLE9BQUFSLEVBQUFxQixPQUFBLE1BRUF0QixFQUFBdUIsa0JBQUF6QixFQUFBMEIsV0FDQXhCLEVBQUFILGlCQUFBLGNBQUE0QixHQUVBekIsRUFBQUgsaUJBQUEsWUE4Q0EsU0FBQTZCLEVBQUE1QixHQUVBRSxFQUFBMkIsb0JBQUEsY0FBQUYsR0FDQVYsRUFBQUEsb0JBQUFBLFlBQUFBLEdBQ0FmLEVBQUE0QixzQkFBQTlCLEVBQUEwQixXQVVBeEIsRUFBQW9CLFFBQUFDLFVBQUEsRUFOQWxDLEVBQUE4QixPQUFBakIsR0FDQWIsRUFBQTBDLFNBR0E3QixJQUFBQSxFQUFBQSxtQkFBQUEsU0FBQUEsY0FBQUEsbUJBQUFBLFVBS0FiLEdBQUFBLEVBQUFBLFNBQUFBLG1CQUFBQSxPQU1BLElBSEEsSUFBQTJDLEVBQUEsRUFHQUMsRUFBQSxFQUFBQSxFQUFBQyxFQUFBbkIsT0FBQSxFQUFBa0IsSUFBQSxDQUNBLElBQUFFLEVBQUFELEVBQUFELEVBQUEsR0FDQUcsRUFBQUYsRUFBQUcsUUFBQUYsR0FBQSxFQU1BRyxFQUFBQyxTQUFBSixFQUFBSyxhQUFBLGdCQURBSixJQUFBRSxHQUFBTixJQUlBQSxJQUFBRSxFQUFBbkIsUUFBQXJDLGNBQUErRCxVQUFBQyxJQUFBIiwiZmlsZSI6Im1ha2UtaXQtd29yay5qcyIsInNvdXJjZXNDb250ZW50IjpbIi8vID09PT09PT09PT09PT09PT09PT09PT09PVxyXG4vLyBWYXJpYWJsZXNcclxuLy8gPT09PT09PT09PT09PT09PT09PT09PT09XHJcblxyXG5jb25zdCBkcmFnZ2FibGVzID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnW2RhdGEtZHJhZ2dhYmxlXScpXHJcbmNvbnN0IHRvdGFsTnVtYmVyT2ZCb3hlcyA9IFsuLi5kb2N1bWVudC5xdWVyeVNlbGVjdG9yKCdbZGF0YS1waWNrem9uZV0nKS5jaGlsZHJlbl1cclxuY29uc3Qgc3VjY2VzTWVzc2FnZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5zdWNjZXNzJylcclxuXHJcbi8vID09PT09PT09PT09PT09PT09PT09PT09PVxyXG4vLyBGdW5jdGlvbnNcclxuLy8gPT09PT09PT09PT09PT09PT09PT09PT09XHJcblxyXG4vLyBjaGVjayBmb3IgZHJvcHpvbmVcclxuY29uc3QgZ2V0RHJvcHpvbmUgPSBlbGVtZW50ID0+IHtcclxuICBjb25zdCB7IHRvcCwgbGVmdCB9ID0gZWxlbWVudC5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKVxyXG4gIGNvbnN0IGhpdFRlc3QgPSBkb2N1bWVudC5lbGVtZW50RnJvbVBvaW50KGxlZnQsIHRvcClcclxuICByZXR1cm4gaGl0VGVzdC5jbG9zZXN0KCdbZGF0YS1kcm9wem9uZV0nKVxyXG59XHJcblxyXG4vLyBnZXQgdGhlIGN1cnJlbnQgcHJldmlldyBwb3NpdGlvblxyXG5mdW5jdGlvbiBnZXRDdXJyZW50UHJldmlld1Bvc2l0aW9uIChkcm9wem9uZSwgcHJldmlldykge1xyXG4gIHJldHVybiBbLi4uZHJvcHpvbmUuY2hpbGRyZW5dLmZpbmRJbmRleChlbGVtZW50ID0+IHtcclxuICAgIHJldHVybiBlbGVtZW50ID09PSBwcmV2aWV3XHJcbiAgfSlcclxufVxyXG5cclxuLy8gZ2V0IHRoZSBkZXNpcmVkIHByZXZpZXcgcG9zaXRpb25cclxuZnVuY3Rpb24gZ2V0RGVzaXJlZFByZXZpZXdQb3NpdGlvbiAoZHJvcHpvbmUsIGVsZW1lbnQpIHtcclxuICBjb25zdCB7IGxlZnQsIHRvcCB9ID0gZWxlbWVudC5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKVxyXG5cclxuICBjb25zdCBwb3NpdGlvbnMgPSBbLi4uZHJvcHpvbmUuY2hpbGRyZW5dXHJcbiAgICAubWFwKGVsZW1lbnQgPT4gZWxlbWVudC5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKSlcclxuXHJcbiAgcmV0dXJuIHBvc2l0aW9ucy5maW5kSW5kZXgocG9zID0+IHtcclxuICAgIHJldHVybiAocG9zLmxlZnQgPCBsZWZ0ICYmIGxlZnQgPCBwb3MucmlnaHQpICYmXHJcbiAgICAgIChwb3MudG9wIDwgdG9wICYmIHRvcCA8IHBvcy5ib3R0b20pXHJcbiAgfSlcclxufVxyXG5cclxuLy8gPT09PT09PT09PT09PT09PT09PT09PT09XHJcbi8vIEV4ZWN1dGlvblxyXG4vLyA9PT09PT09PT09PT09PT09PT09PT09PT1cclxuXHJcbi8vIGZpeCBmb3IgY2hyb21pdW0gYmFzZWQgYnJvd3NlcnMgb24gYW5kcm9pZFxyXG5kcmFnZ2FibGVzLmZvckVhY2goZHJhZ2dhYmxlID0+IHtcclxuICBkcmFnZ2FibGUuYWRkRXZlbnRMaXN0ZW5lcigndG91Y2hzdGFydCcsIGV2ZW50ID0+IHtcclxuICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KClcclxuICB9KVxyXG59KVxyXG5cclxuLy8gYWRkIHBvaW50ZXJldmVudCB0byBhbGwgZHJhZ2dhYmxlc1xyXG5kcmFnZ2FibGVzLmZvckVhY2goZHJhZ2dhYmxlID0+IHtcclxuICBkcmFnZ2FibGUuYWRkRXZlbnRMaXN0ZW5lcigncG9pbnRlcmRvd24nLCBldmVudCA9PiB7XHJcbiAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpXHJcblxyXG4gICAgY29uc3QgdGFyZ2V0ID0gZXZlbnQudGFyZ2V0XHJcbiAgICBjb25zdCBib3ggPSB0YXJnZXQuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KClcclxuICAgIGxldCBwcmV2U2NyZWVuWCA9IGV2ZW50LnNjcmVlblhcclxuICAgIGxldCBwcmV2U2NyZWVuWSA9IGV2ZW50LnNjcmVlbllcclxuXHJcbiAgICBjb25zdCBwcmV2aWV3ID0gdGFyZ2V0LmNsb25lTm9kZSgpXHJcbiAgICBwcmV2aWV3LmNsYXNzTGlzdC5hZGQoJ3ByZXZpZXcnKVxyXG4gICAgdGFyZ2V0LmJlZm9yZShwcmV2aWV3KVxyXG5cclxuICAgIGRvY3VtZW50LmJvZHkuYXBwZW5kKHRhcmdldClcclxuICAgIHRhcmdldC5kYXRhc2V0LmRyYWdnaW5nID0gdHJ1ZVxyXG5cclxuICAgIHRhcmdldC5zdHlsZS5sZWZ0ID0gYCR7Ym94LmxlZnR9cHhgXHJcbiAgICB0YXJnZXQuc3R5bGUudG9wID0gYCR7Ym94LnRvcH1weGBcclxuICAgIHRhcmdldC5zdHlsZS53aWR0aCA9IGAke2JveC53aWR0aH1weGBcclxuICAgIHRhcmdldC5zdHlsZS5oZWlnaHQgPSBgJHtib3guaGVpZ2h0fXB4YFxyXG5cclxuICAgIHRhcmdldC5zZXRQb2ludGVyQ2FwdHVyZShldmVudC5wb2ludGVySWQpXHJcbiAgICB0YXJnZXQuYWRkRXZlbnRMaXN0ZW5lcigncG9pbnRlcm1vdmUnLCBtb3ZlKVxyXG4gICAgdGFyZ2V0LmFkZEV2ZW50TGlzdGVuZXIoJ3BvaW50ZXJ1cCcsIHVwKVxyXG5cclxuICAgIC8vIHN0YXJ0IGV2ZW50IHdoZW4gdGhlIHVzZXIgbW94ZXMgYSBib3hcclxuICAgIGZ1bmN0aW9uIG1vdmUgKGV2ZW50KSB7XHJcbiAgICAgIC8vIGdldCBtb3ZlbWVudFggYW5kIG1vdmVtZW50WSB0byBjYWxjdWxhdGUgYW1vdW50IHRoZSBtb3VzZSBtb3Zlc1xyXG4gICAgICBjb25zdCBtb3ZlbWVudFggPSBldmVudC5zY3JlZW5YIC0gcHJldlNjcmVlblhcclxuICAgICAgY29uc3QgbW92ZW1lbnRZID0gZXZlbnQuc2NyZWVuWSAtIHByZXZTY3JlZW5ZXHJcbiAgICAgIHByZXZTY3JlZW5YID0gZXZlbnQuc2NyZWVuWFxyXG4gICAgICBwcmV2U2NyZWVuWSA9IGV2ZW50LnNjcmVlbllcclxuXHJcbiAgICAgIC8vIGNoYW5nZSBwb3NpdGlvbiBvZiB0YXJnZXQgZWxlbWVudFxyXG4gICAgICBjb25zdCBsZWZ0ID0gcGFyc2VGbG9hdCh0YXJnZXQuc3R5bGUubGVmdClcclxuICAgICAgY29uc3QgdG9wID0gcGFyc2VGbG9hdCh0YXJnZXQuc3R5bGUudG9wKVxyXG4gICAgICB0YXJnZXQuc3R5bGUubGVmdCA9IGAke2xlZnQgKyBtb3ZlbWVudFh9cHhgXHJcbiAgICAgIHRhcmdldC5zdHlsZS50b3AgPSBgJHt0b3AgKyBtb3ZlbWVudFl9cHhgXHJcblxyXG4gICAgICAvLyBkZXRlY3QgZHJvcHpvbmVcclxuICAgICAgY29uc3QgZHJvcHpvbmUgPSBnZXREcm9wem9uZSh0YXJnZXQpXHJcbiAgICAgIGlmICghZHJvcHpvbmUpIHJldHVyblxyXG5cclxuICAgICAgLy8gYWRkIHByZXZpZXcgaW50byBkcm9wem9uZSBpZiBpdCdzIG5vdCB0aGVyZVxyXG4gICAgICBsZXQgcHJldmlld1BvcyA9IGdldEN1cnJlbnRQcmV2aWV3UG9zaXRpb24oZHJvcHpvbmUsIHByZXZpZXcpXHJcbiAgICAgIGlmIChwcmV2aWV3UG9zID09PSAtMSkge1xyXG4gICAgICAgIGRyb3B6b25lLmFwcGVuZChwcmV2aWV3KVxyXG4gICAgICAgIHByZXZpZXdQb3MgPSBkcm9wem9uZS5jaGlsZHJlbi5sZW5ndGggLSAxXHJcbiAgICAgIH1cclxuXHJcbiAgICAgIC8vIHN3aXRjaCBwcmV2aWV3IHRvIGRlc2lyZWQgcG9zaXRpb25cclxuICAgICAgY29uc3QgcG9zaXRpb24gPSBnZXREZXNpcmVkUHJldmlld1Bvc2l0aW9uKGRyb3B6b25lLCB0YXJnZXQpXHJcbiAgICAgIGlmIChwb3NpdGlvbiA9PT0gLTEpIHJldHVyblxyXG5cclxuICAgICAgY29uc3QgZWxlbSA9IGRyb3B6b25lLmNoaWxkcmVuW3Bvc2l0aW9uXVxyXG4gICAgICBpZiAocG9zaXRpb24gPiBwcmV2aWV3UG9zKSB7XHJcbiAgICAgICAgZWxlbS5hZnRlcihwcmV2aWV3KVxyXG4gICAgICB9IGVsc2Uge1xyXG4gICAgICAgIGVsZW0uYmVmb3JlKHByZXZpZXcpXHJcbiAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICAvLyBzdGFydCBldmVudCB3aGVuIHRoZSB1c2VyIGRyb3BwZXMgYSBib3hcclxuICAgIGZ1bmN0aW9uIHVwIChldmVudCkge1xyXG4gICAgICAvLyByZW1vdmUgb3RoZXIgcG9pbnRlciBldmVudHNcclxuICAgICAgdGFyZ2V0LnJlbW92ZUV2ZW50TGlzdGVuZXIoJ3BvaW50ZXJtb3ZlJywgbW92ZSlcclxuICAgICAgdGFyZ2V0LnJlbW92ZUV2ZW50TGlzdGVuZXIoJ3BvaW50ZXJ1cCcsIHVwKVxyXG4gICAgICB0YXJnZXQucmVsZWFzZVBvaW50ZXJDYXB0dXJlKGV2ZW50LnBvaW50ZXJJZClcclxuXHJcbiAgICAgIHRhcmdldC5kYXRhc2V0LmRyYWdnaW5nID0gZmFsc2VcclxuXHJcbiAgICAgIHByZXZpZXcuYmVmb3JlKHRhcmdldClcclxuICAgICAgcHJldmlldy5yZW1vdmUoKVxyXG5cclxuICAgICAgLy8gc2VsZWN0IGFsbCBib3hlcyBpbiBkZSBkcm9wem9uZVxyXG4gICAgICBjb25zdCBjdXJyZW50RHJvcHpvbmVCb3hlcyA9IFsuLi5kb2N1bWVudC5xdWVyeVNlbGVjdG9yKCdbZGF0YS1kcm9wem9uZV0nKS5jaGlsZHJlbl1cclxuXHJcbiAgICAgIC8vIGNoZWNrIHRvIHNlZSBpZiBhbGwgdGhlIGJveGVzIGFyZSBkcm9wcGVkIGluIHRoZSBkcm9wem9uZVxyXG4gICAgICBpZiAoY3VycmVudERyb3B6b25lQm94ZXMubGVuZ3RoID09PSB0b3RhbE51bWJlck9mQm94ZXMubGVuZ3RoKSB7XHJcbiAgICAgICAgLy8gc2V0IHRoZSBzdGFydGluZyB3aW5uaW5nIG51bWJlclxyXG4gICAgICAgIGxldCB3aW5uaW5nTnVtYmVyID0gMVxyXG5cclxuICAgICAgICAvLyBsb29wIHRocm91Z2ggYWxsIHRoZSBpdGVtcyBhbmQgY2hlY2sgd2hldGhlciB0aGV5IGFyZSBvbiB0aGUgcmlnaHQgcG9zaXRpb25cclxuICAgICAgICBmb3IgKGxldCBpID0gMTsgaSA8IGN1cnJlbnREcm9wem9uZUJveGVzLmxlbmd0aCArIDE7IGkrKykge1xyXG4gICAgICAgICAgY29uc3QgY3VycmVudEJveCA9IGN1cnJlbnREcm9wem9uZUJveGVzW2kgLSAxXVxyXG4gICAgICAgICAgY29uc3QgY3VycmVudEJveFBvc2l0aW9uID0gY3VycmVudERyb3B6b25lQm94ZXMuaW5kZXhPZihjdXJyZW50Qm94KSArIDFcclxuICAgICAgICAgIGNvbnN0IGN1cnJlbnRCb3hOdW1iZXIgPSBwYXJzZUludChjdXJyZW50Qm94LmdldEF0dHJpYnV0ZSgnZGF0YS1udW1iZXInKSlcclxuXHJcbiAgICAgICAgICAvLyBpZiB0aGUgcG9zaXRpb24gaXMgY29ycmVjdCBhZGQgb25lIHRvIHRoZSB3aW5uaW5nIG51bWJlclxyXG4gICAgICAgICAgaWYgKGN1cnJlbnRCb3hQb3NpdGlvbiA9PT0gY3VycmVudEJveE51bWJlcikgd2lubmluZ051bWJlcisrXHJcblxyXG4gICAgICAgICAgLy8gaWYgdGhlIHdpbm5pbmcgbnVtYmVyIG1hdGNoZXMgdGhlIG51bWJlciBvZiBib3hlcyB0aGVuIGNvbXBsZXRlIHRoZSBnYW1lXHJcbiAgICAgICAgICBpZiAod2lubmluZ051bWJlciA9PT0gY3VycmVudERyb3B6b25lQm94ZXMubGVuZ3RoKSBzdWNjZXNNZXNzYWdlLmNsYXNzTGlzdC5hZGQoJ3Nob3cnKVxyXG4gICAgICAgIH1cclxuICAgICAgfVxyXG4gICAgfVxyXG4gIH0pXHJcbn0pXHJcbiJdfQ==
